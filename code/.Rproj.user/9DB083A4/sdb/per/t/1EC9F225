{
    "collab_server" : "",
    "contents" : "#Data Visualization\n#19 December 2016\n#Diedre Brown\n\n\n####Packages, Requires, Sources####\nrequire('ggplot2')\nrequire(lubridate)\nlibrary(tidyr)\nrequire(dplyr)\nrequire(hexbin)\nlibrary(RColorBrewer)\nrequire('rgdal')\nrequire('maptools')\nrequire('ggmap')\nrequire('rgeos')\nsource('DBDVFThm.R')\n\n####Hydrologic Conditions of New York City and Brooklyn Community District 6#### \n#Sources: NYC Open Data, FEMA\n#By comparing the area of land lost to water within the following criteria (existing borough\n#boundaries, 2020 FEMA floodplain maps, sandy inundation zone,and 2050 FEMA floodplain maps)\n\n###Current Conditions####\n##All Borough Boundaries####\n#Non-map data of NYC Borough Boundaries and Borough Boundaries with Water Areas Included.\nboroboundata<-read.csv('nybb.csv')#borough boundaries\nboroboundwidata<-read.csv('nybbwi.csv')#borough boundaries wih water\n#Find the area of water of each borough\n#Combine the two datasets and print the difference in Shape_Area for each borough\n#Join with a column identifying dataset\n#boroboundata$Coder <- \"A\"\n#boroboundwidata$Coder <-\"B\"\nborojoin <- left_join(boroboundata,boroboundwidata,by=c('BoroCode'='BoroCode')) #join\nborojoinord<-borojoin %>%\n  mutate(ShapeDiff=Shape_Area.y-Shape_Area.x)#calculate coastline = shape difference\ncoast<-ggplot(data = borojoinord, aes(x= reorder(BoroName.x, ShapeDiff), y=ShapeDiff))+\n    geom_bar(stat = \"identity\", \n             fill=\"#ffffff\",\n              size = 0.25)+\n    labs(\n      title=\"Square Miles of Water Area Boundaries Per Borough in New York City\",\n      caption = \"Source: Department of City Planning DCP. \n      https://data.cityofnewyork.us/City-Government/Borough-Boundaries/tqmj-j8zm\")+\n  DBDVFThm\nprint(coast)\nggsave(\"nyccoastline.pdf\",coast)\n  \n\n####Brooklyn Community District 6 - Carroll Gardens, Cobble Hill, Columbia St., Gowanus, Park Slope, Red Hook####\n#A map and graph to show where Community District fits into all of this. \n#i.e.)If Brooklyn has 746939482 sq miles of water boundary, what portion of that belongs to CD6\n#brooklynbound<-borojoinord%>%\n#  filter(BoroCode==3)%>% #looking at Brooklyn only\n#  select(the_geom.x,BoroCode,BoroName.x,Shape_Area.x,ShapeDiff)%>%#selecting only columns needed\n#  rename(ShapeDiff=BkShapeWaterArea)\nnyccddbound<-read.csv('nycd.csv') #cd data\nnyccdboundwi<-read.csv('nycdwi.csv')  #cd data with water\nnyccdboundjoin<-left_join(nyccddbound,nyccdboundwi, by=c('BoroCD'='BoroCD'))\nnyccdboundjoinordered<-nyccdboundjoin%>%\n  arrange(BoroCD)%>%\n  select(BoroCD,Shape_Area.x,Shape_Area.y)%>%\n  mutate(cdShapeDiff=Shape_Area.y-Shape_Area.x)%>%\n  mutate(cdwaterper=Shape_Area.y/cdShapeDiff * 100)\nbkcdfilt<-slice(nyccdboundjoinordered, 29:46)\nbkcdchart<-ggplot(data = bkcdfilt, aes(x=reorder(BoroCD,cdShapeDiff),y=cdShapeDiff))+\n  geom_bar(stat = \"identity\", \n           fill=\"#ffffff\",\n           size = 0.25)+\n  labs(\n    title=\"Square Miles of Water Area Boundaries Per Brooklyn Community District\",\n    caption = \"Source: Department of City Planning DCP. \n    https://data.cityofnewyork.us/City-Government/Borough-Boundaries/tqmj-j8zm\")+\n  DBDVFThm\nprint(bkcdchart)\nggsave(\"bkcdwaterchart.pdf\",bkcdchart)\n\n#all the community districts\nnyccdchart<-ggplot(nyccdboundjoinordered, aes(x=BoroCD,y=cdShapeDiff, size=cdwaterper, color=BoroCD))+\n  geom_point(\n    alpha=0.3)+\n  geom_text(aes(label=ifelse(BoroCD==306,as.character(BoroCD),'')), hjust=0,vjust=0)+\n  labs(\n    title=\"Percentage of Square Miles of Coast Per Community District\",\n    caption = \"Source: Department of City Planning DCP. \n    https://data.cityofnewyork.us/City-Government/Borough-Boundaries/tqmj-j8zm\")+\n  DBDVFThm\nprint(nyccdchart)\nggsave(\"NYCcdwaterchart.pdf\",nyccdchart)\n  \n",
    "created" : 1482184902173.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1958850385",
    "id" : "1EC9F225",
    "lastKnownWriteTime" : 1482189134,
    "last_content_update" : 1482189134061,
    "path" : "~/Desktop/diedrenycwater/diedrenycwater.github.io/code/brown_prototype_5dec.R",
    "project_path" : "brown_prototype_5dec.R",
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}